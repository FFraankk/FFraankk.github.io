<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>ç½‘ç»œç²˜è´´æ¿ - äº‘ç«¯ä¸æœ¬åœ°</title>
  <style>
    body {
      font-family: sans-serif;
      max-width: 600px;
      margin: 40px auto;
      background: #f2f2f2;
      padding: 20px;
      border-radius: 10px;
      /* ç§»é™¤ç»å¯¹å®šä½ï¼Œä½¿ç”¨å®¹å™¨å¸ƒå±€ */
    }
    /* æ–°å¢å¤´éƒ¨å®¹å™¨æ ·å¼ */
    .header-container {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 20px;
    }
    .header-container h1 {
      margin: 0;
      font-size: 1.8rem;
    }
    .back-btn {
      padding: 8px 15px;
      background: #25d366;
      color: white;
      text-decoration: none;
      border-radius: 20px;
      font-size: 14px;
      transition: all 0.3s;
      border: 2px solid #1da851;
    }
    section {
      margin-bottom: 40px;
      padding: 20px;
      background: #fff;
      border: 1px solid #ccc;
      border-radius: 8px;
    }
    textarea {
      width: 100%;
      height: 200px;
      padding: 10px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 8px;
      box-sizing: border-box;
      margin-bottom: 10px;
    }
    button {
      margin-top: 10px;
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      background-color: #007bff;
      color: white;
    }
    button:hover {
      background-color: #0056b3;
    }
    .status {
      margin-top: 10px;
      font-size: 14px;
      color: green;
    }
  </style>
</head>
<body>

  <!-- å¤´éƒ¨åŒºåŸŸï¼šæ ‡é¢˜ä¸è¿”å›ä¸»ç«™æŒ‰é’® -->
  <div class="header-container">
    <h1>ç½‘ç»œç²˜è´´æ¿</h1>
    <a href="https://ffraankk.github.io" class="back-btn">
      â† è¿”å›ä¸»ç«™
    </a>
  </div>

  <!-- äº‘ç«¯ç²˜è´´æ¿åŒºåŸŸ -->
  <section id="cloud-section">
    <h2>äº‘ç«¯ç²˜è´´æ¿ (JsonBin.io)</h2>
    <textarea id="pasteContent" placeholder="è¾“å…¥æˆ–ç²˜è´´å†…å®¹..."></textarea><br>
    <button onclick="saveToBin()">ä¿å­˜å†…å®¹</button>
    <button onclick="loadFromBin()">åŠ è½½å†…å®¹</button>
    <div id="status" class="status"></div>
  </section>

  <!-- æœ¬åœ°ç²˜è´´æ¿åŒºåŸŸ -->
  <section id="local-section">
    <h2>æœ¬åœ°ç²˜è´´æ¿ (Local Storage)</h2>
    <textarea id="pasteArea" placeholder="åœ¨æ­¤è¾“å…¥æˆ–ç²˜è´´å†…å®¹..."></textarea><br>
    <button onclick="saveContent()">ä¿å­˜</button>
    <button onclick="loadContent()">è¯»å–</button>
    <button onclick="clearContent()">æ¸…é™¤</button>
    <div id="statusText" class="status"></div>
  </section>

  <script>
    // ========================
    // äº‘ç«¯ç²˜è´´æ¿ï¼ˆJsonBin.ioï¼‰
    // ========================
    // æ›¿æ¢ä¸ºä½ è‡ªå·±çš„ JsonBin.io ä¿¡æ¯
    const BIN_ID = "67f813b28561e97a50fcf455";
    const API_KEY = "$2a$10$VnUPJW0elkc/oMQgGEXMEebL92KfgT9uLQdNa6OM6.l6bAayvNWlW";

    async function saveToBin() {
      const content = document.getElementById("pasteContent").value;
      try {
        const response = await fetch(`https://api.jsonbin.io/v3/b/${BIN_ID}`, {
          method: "PUT",
          headers: {
            "Content-Type": "application/json",
            "X-Master-Key": API_KEY
          },
          body: JSON.stringify({ text: content })
        });
        if (response.ok) {
          document.getElementById("status").textContent = "âœ… å†…å®¹å·²ä¿å­˜åˆ°äº‘ç«¯";
        } else {
          document.getElementById("status").textContent = "âŒ ä¿å­˜å¤±è´¥";
        }
      } catch (err) {
        console.error(err);
        document.getElementById("status").textContent = "âš ï¸ ç½‘ç»œé”™è¯¯";
      }
    }

    async function loadFromBin() {
      try {
        const response = await fetch(`https://api.jsonbin.io/v3/b/${BIN_ID}/latest`, {
          method: "GET",
          headers: {
            "X-Master-Key": API_KEY
          }
        });
        const data = await response.json();
        document.getElementById("pasteContent").value = data.record.text || "";
        document.getElementById("status").textContent = "ğŸ“„ å†…å®¹å·²åŠ è½½";
      } catch (err) {
        console.error(err);
        document.getElementById("status").textContent = "âš ï¸ åŠ è½½å¤±è´¥";
      }
    }

    // =============================
    // æœ¬åœ°ç²˜è´´æ¿ï¼ˆLocal Storageï¼‰
    // =============================
    const STORAGE_KEY = "simpleClipboard";

    function saveContent() {
      const content = document.getElementById("pasteArea").value;
      localStorage.setItem(STORAGE_KEY, content);
      document.getElementById("statusText").textContent = "âœ… å†…å®¹å·²ä¿å­˜åˆ°æœ¬åœ°ã€‚";
    }

    function loadContent() {
      const content = localStorage.getItem(STORAGE_KEY) || "";
      document.getElementById("pasteArea").value = content;
      document.getElementById("statusText").textContent = "ğŸ“„ å·²ä»æœ¬åœ°åŠ è½½å†…å®¹ã€‚";
    }

    function clearContent() {
      localStorage.removeItem(STORAGE_KEY);
      document.getElementById("pasteArea").value = "";
      document.getElementById("statusText").textContent = "ğŸ§¹ å†…å®¹å·²æ¸…é™¤ã€‚";
    }

    // é¡µé¢åŠ è½½æ—¶åŒæ—¶åŠ è½½äº‘ç«¯ä¸æœ¬åœ°å†…å®¹
    window.onload = function() {
      loadFromBin();
      loadContent();
    }
  </script>

</body>
</html>
